<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Disco Light Demo</title>
    <style>
        #canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="400"></canvas>

    <script>
      function generator(A, B, centerX, centerY) {
        // Frequencies for x and y
        let a0 = Math.random() * Math.PI * 2;
        let b0 = Math.random() * Math.PI * 2;
        let c0 = Math.random() * Math.PI * 2;
        let d0 = Math.random() * Math.PI * 2;
        let a = Math.random() * 3;
        let b = Math.random() * 3;
        let c = Math.random() * 3;
        let d = Math.random() * 3;

        // Function to calculate x and y based on time t
        return function f(t) {
            const x = A * Math.sin(a * t + b0) + centerX;
            const y = B * Math.cos(c * t + d0) + centerY;
            return { x, y };
        }
      }

      function drawDiscoLight() {
            // Get canvas and context
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            // Rectangle boundaries
            const minX = 50;
            const minY = 50;
            const maxX = canvas.width - 50;
            const maxY = canvas.height - 50;

            // Amplitude for x and y
            const A = (maxX - minX) / 2;
            const B = (maxY - minY) / 2;

            // Center of the rectangle
            const centerX = (minX + maxX) / 2;
            const centerY = (minY + maxY) / 2;

            const fs = Array(5).fill(0).map(() => generator(A, B, centerX, centerY))

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw the rectangle
                ctx.strokeRect(minX, minY, maxX - minX, maxY - minY);

                // Get the current time in seconds
                const t = performance.now() / 1000;

                // Draw the disco light as a circle
                
                for(const f of fs) {
                  ctx.beginPath();
                  ctx.fillStyle = 'red';
                  const { x, y } = f(t);
                  ctx.arc(x, y, 10, 0, 2 * Math.PI);
                  ctx.fill();
                }

                ctx.closePath();

                // Request the next frame
                requestAnimationFrame(animate);
            }

            // Start the animation
            animate();
        }
        
        // Call the function to initialize and start the animation.
        drawDiscoLight();
    </script>
</body>
</html>

